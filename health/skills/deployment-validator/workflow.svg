<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 950">
  <defs>
    <style>
      .input { fill: #0066CC; }
      .process { fill: #00AA00; }
      .output { fill: #FF8800; }
      text { fill: white; font-family: Arial, sans-serif; font-size: 13px; }
      .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .title { font-size: 18px; font-weight: bold; fill: #333; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" class="title">Deployment Health Checker Workflow</text>

  <!-- Step 1: Questions/Inputs -->
  <rect x="50" y="60" width="800" height="160" rx="5" class="input"/>
  <text x="450" y="90" text-anchor="middle" font-weight="bold">INPUTS: What the Skill Asks For</text>
  <text x="60" y="115" font-size="12">• Repository paths (base path and AgV path, auto-detected from config)</text>
  <text x="60" y="135" font-size="12">• Workshop name and AgnosticV config path</text>
  <text x="60" y="155" font-size="12">• Collection to add validation role to</text>
  <text x="60" y="175" font-size="12">• Automation method (workloads only, GitOps only, or both)</text>
  <text x="60" y="195" font-size="12">• User-provided command outputs from bastion (namespace discovery, pod status, routes)</text>
  <text x="60" y="215" font-size="12">Note: User runs commands manually on bastion and shares output</text>

  <!-- Arrow -->
  <path d="M 450 220 L 450 250" class="arrow"/>

  <!-- Step 2: Process -->
  <rect x="50" y="250" width="800" height="420" rx="5" class="process"/>
  <text x="450" y="280" text-anchor="middle" font-weight="bold">PROCESS: What the Skill Does</text>
  <text x="60" y="305" font-size="12">Phase 1 - Initial Setup:</text>
  <text x="70" y="323" font-size="12">1. Reads AgnosticV common.yaml to discover workloads and collections</text>
  <text x="70" y="341" font-size="12">2. Verifies/clones collection repositories</text>
  <text x="70" y="359" font-size="12">3. Verifies/clones GitOps repositories (if applicable)</text>
  <text x="60" y="381" font-size="12">Phase 2 - Component Discovery:</text>
  <text x="70" y="399" font-size="12">1. Guides user through manual bastion login</text>
  <text x="70" y="417" font-size="12">2. Provides commands one-by-one to discover deployed components</text>
  <text x="70" y="435" font-size="12">3. Analyzes user-provided outputs to identify namespace/pod/route patterns</text>
  <text x="60" y="457" font-size="12">Phase 3 - Create Validation Role:</text>
  <text x="70" y="475" font-size="12">1. Creates branch in collection repository</text>
  <text x="70" y="493" font-size="12">2. Generates role structure (defaults, tasks, meta, README)</text>
  <text x="70" y="511" font-size="12">3. Creates component check tasks using RHADS validation pattern</text>
  <text x="70" y="529" font-size="12">4. Generates report with type-safe counters</text>
  <text x="70" y="547" font-size="12">5. Checks for/copies agnosticd_user_info plugin if needed</text>
  <text x="70" y="565" font-size="12">6. Commits and pushes to collection branch</text>
  <text x="60" y="587" font-size="12">Phase 4 - Update AgnosticV:</text>
  <text x="70" y="605" font-size="12">1. Creates branch in AgnosticV repository</text>
  <text x="70" y="623" font-size="12">2. Updates common.yaml with validation workload</text>
  <text x="70" y="641" font-size="12">3. Updates info-message-template.adoc with validation report section</text>
  <text x="70" y="659" font-size="12">4. Commits and pushes to AgnosticV branch</text>

  <!-- Arrow -->
  <path d="M 450 670 L 450 700" class="arrow"/>

  <!-- Step 3: Outputs -->
  <rect x="50" y="700" width="800" height="180" rx="5" class="output"/>
  <text x="450" y="730" text-anchor="middle" font-weight="bold">OUTPUTS: What It Creates</text>
  <text x="60" y="755" font-size="12">✓ Complete validation role in collection repository:</text>
  <text x="80" y="773" font-size="12">  - roles/ocp4_workload_{workshop_name}_validation/ (defaults, tasks, meta)</text>
  <text x="80" y="791" font-size="12">  - playbooks/validate_{workshop_name}.yml (test playbook)</text>
  <text x="60" y="813" font-size="12">✓ Updated AgnosticV configuration:</text>
  <text x="80" y="831" font-size="12">  - common.yaml with validation workload entry</text>
  <text x="80" y="849" font-size="12">  - info-message-template.adoc with validation report section</text>
  <text x="60" y="871" font-size="12">✓ Both repositories have feature branches ready for PR creation</text>

  <!-- Arrow -->
  <path d="M 450 880 L 450 910" class="arrow"/>

  <!-- Final Note -->
  <rect x="50" y="910" width="800" height="30" rx="5" fill="#f0f0f0"/>
  <text x="450" y="930" text-anchor="middle" fill="#333" font-size="12">Guides user through bastion testing (9 steps) and PR creation with detailed health reports</text>
</svg>
